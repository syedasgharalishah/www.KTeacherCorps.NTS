<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDUCATION DEPARTMENT SCREENING TEST PREPARATION – JUNE 1ST, 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Very light gray */
            color: #2C3E50; /* Main text color */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 10vh;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #6D6875;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .top-bar .whatsapp-link {
            color: #6D6875;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 1rem;
        }

        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #20B2AA, #3EB489);
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #6D6875;
            margin-top: 0.5rem;
        }

        .card {
            background-color: #FFF5EE; /* PeachPuff */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }

        .button-gradient {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9); /* Lavender to PeachPuff */
            color: #2C3E50;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .button-gradient:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #2C3E50;
            font-weight: normal;
        }

        .option-button:hover:not(.selected) {
            background-color: #f0f0f0;
        }

        .option-button.selected {
            border-color: #6D6875;
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #28a745;
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #FF6B6B; /* Red pulse */
            border-color: #dc3545;
            animation: shake-red 0.5s ease-out forwards;
        }

        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .explanation {
            background-color: #e0f7fa;
            border-left: 5px solid #20B2AA;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #2C3E50;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        .timer-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2C3E50;
            margin-bottom: 1rem;
            text-align: center;
        }

        .question-progress {
            font-size: 1rem;
            color: #6D6875;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem;
            }
            .top-bar .date-display {
                order: 2; /* Move date to bottom on mobile */
                font-size: 0.8rem;
            }
            .top-bar .whatsapp-link {
                order: 1; /* Move whatsapp to top on mobile */
                font-size: 0.8rem;
            }
            .quiz-title {
                font-size: 1.5rem;
            }
            .banner-logo {
                max-width: 150px;
            }
            .card {
                margin: 0.75rem auto;
                padding: 1rem;
            }
            .button-gradient {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
            .option-button {
                padding: 0.6rem 0.8rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>

    <script>
        document.addEventListener('contextmenu', event => event.preventDefault()); // Disable right-click
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) {
                e.preventDefault(); // Disable Ctrl+U, Ctrl+Shift+I, Ctrl+Shift+J
            }
            if (e.key === 'F12') {
                e.preventDefault(); // Disable F12
            }
        });
        document.addEventListener('copy', event => event.preventDefault()); // Disable copy
        document.addEventListener('paste', event => event.preventDefault()); // Disable paste
    </script>

    <div class="top-bar">
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
        <div class="date-display" id="liveDate"></div>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/LXdkJVy8/20250524-0050-Empowering-Educators-remix-01jw0makvqewdvqns1te3jvpgs.png" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            KP Teacher Corps | PREPARED BY: SYED ASGHAR ALI SHAH | Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display" id="timerDisplay"></div>
            <div class="question-progress" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6">
                </div>
            <div class="flex justify-between">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
                <button id="submitQuizBtn" class="button-gradient px-6 py-2 hidden">Submit Quiz</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / 200</p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>
    </main>

    <script>
        // Set the current date for display and logic
        const CURRENT_DATE_STR = "JUNE 1ST, 2025"; // MANDATORY DAILY INPUT
        const CURRENT_DATE = new Date(CURRENT_DATE_STR);

        // Update header dates
        document.getElementById('liveDate').textContent = CURRENT_DATE_STR;
        document.getElementById('updatedDate').textContent = CURRENT_DATE_STR;
        document.getElementById('quizTitle').textContent = `EDUCATION DEPARTMENT SCREENING TEST PREPARATION – ${CURRENT_DATE_STR}`;

        // Quiz Data Structure
        const quizQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores { questionIndex: int, selectedOptionIndex: int, isCorrect: bool }
        let quizStartTime;
        let timerInterval;
        const QUIZ_DURATION_MINUTES = 40;
        let specialQuestionIndex = -1; // To store the index of the special question

        // --- Helper Functions ---

        /**
         * Shuffles an array in place using Fisher-Yates (Knuth) shuffle.
         * @param {Array} array - The array to shuffle.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Generates a unique ID for Formspree submission.
         * @returns {string} A unique ID.
         */
        function generateUniqueId() {
            return 'quiz_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        /**
         * Converts seconds to a human-readable time string (e.g., "35 minutes 10 seconds").
         * @param {number} totalSeconds - The total number of seconds.
         * @returns {string} Formatted time string.
         */
        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        /**
         * Updates the progress bar and question progress text.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} – ${Math.round(progress)}% Complete`;
        }

        /**
         * Displays a specific page and hides others.
         * @param {string} pageId - The ID of the page to display.
         */
        function showPage(pageId) {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('candidateNamePage').classList.add('hidden');
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById(pageId).classList.remove('hidden');
        }

        /**
         * Starts the quiz timer.
         */
        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60; // Convert minutes to seconds

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timerDisplay').textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz(true); // Auto-submit on timer expiry
                } else {
                    timeLeft--;
                }
            }

            updateTimerDisplay(); // Initial display
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        /**
         * Renders the current question and its options.
         */
        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = ''; // Clear previous options

            // Remove special-question class from previous question if any
            const quizCard = document.getElementById('quizPage');
            quizCard.classList.remove('special-question');

            // Add special-question class if it's today's special question and date matches
            const today = new Date().toDateString();
            if (question.special && CURRENT_DATE.toDateString() === today) {
                quizCard.classList.add('special-question');
            }

            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.textContent = option;
                button.dataset.optionIndex = index;
                button.onclick = () => selectOption(index);

                // Apply selected state if already answered
                const userAnswer = userAnswers[currentQuestionIndex];
                if (userAnswer && userAnswer.selectedOptionIndex === index) {
                    button.classList.add('selected');
                    if (userAnswer.isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                    // Disable all options if already answered
                    Array.from(optionsContainer.children).forEach(optBtn => optBtn.disabled = true);
                    document.getElementById('explanationDiv').style.display = 'block';
                }
                optionsContainer.appendChild(button);
            });

            // Show/hide explanation
            const explanationDiv = document.getElementById('explanationDiv');
            explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                explanationDiv.style.display = 'block';
            } else {
                explanationDiv.style.display = 'none';
            }

            // Update navigation buttons visibility
            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            document.getElementById('nextBtn').classList.toggle('hidden', currentQuestionIndex === quizQuestions.length - 1);
            document.getElementById('submitQuizBtn').classList.toggle('hidden', currentQuestionIndex !== quizQuestions.length - 1);

            updateProgressBar();
        }

        /**
         * Handles option selection by the user.
         * @param {number} selectedOptionIndex - The index of the selected option.
         */
        function selectOption(selectedOptionIndex) {
            const question = quizQuestions[currentQuestionIndex];
            const isCorrect = (selectedOptionIndex === question.correctOptionIndex);

            // Store user's answer
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionIndex,
                isCorrect: isCorrect
            };

            // Apply visual feedback
            const optionsContainer = document.getElementById('optionsContainer');
            Array.from(optionsContainer.children).forEach((button, index) => {
                button.disabled = true; // Disable all options after selection
                button.classList.remove('selected', 'correct', 'incorrect'); // Clear previous states

                if (index === selectedOptionIndex) {
                    button.classList.add('selected');
                    if (isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                }
            });

            // Show explanation
            document.getElementById('explanationDiv').style.display = 'block';
        }

        /**
         * Navigates to the next question.
         */
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        /**
         * Navigates to the previous question.
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        /**
         * Submits the quiz, calculates results, and displays them.
         * @param {boolean} isAutoSubmit - True if submitted by timer, false otherwise.
         */
        function submitQuiz(isAutoSubmit = false) {
            clearInterval(timerInterval); // Stop the timer

            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;

            userAnswers.forEach(answer => {
                if (answer && answer.isCorrect) {
                    correctCount++;
                } else if (answer && answer.selectedOptionIndex !== undefined) {
                    incorrectCount++;
                }
            });

            const score = (correctCount * 2) - (incorrectCount * 1);
            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = CURRENT_DATE_STR;
            document.getElementById('resultScore').textContent = score;
            document.getElementById('resultCorrect').textContent = `${correctCount} / ${userAnswers.length}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount} / ${userAnswers.length}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);

            showPage('resultsPage');

            // Silent Formspree submission
            const formData = new FormData();
            formData.append('Candidate Name', candidateName);
            formData.append('Date of Quiz', CURRENT_DATE_STR);
            formData.append('Score', score);
            formData.append('Correct Answers', correctCount);
            formData.append('Incorrect Answers', incorrectCount);
            formData.append('Time Taken', formatTime(timeTakenSeconds));
            formData.append('Quiz ID', generateUniqueId()); // Unique ID for each submission

            fetch('https://formspree.io/f/xwpojgab', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    console.log('Quiz results submitted successfully!');
                } else {
                    console.error('Formspree submission failed.');
                }
            }).catch(error => {
                console.error('Error during Formspree submission:', error);
            });
        }

        // --- Event Listeners ---

        document.getElementById('loginBtn').addEventListener('click', () => {
            const id = document.getElementById('loginId').value;
            const password = document.getElementById('loginPassword').value;
            const loginError = document.getElementById('loginError');

            if (id === '112233' && password === '112233') {
                loginError.classList.add('hidden');
                showPage('candidateNamePage');
            } else {
                loginError.classList.remove('hidden');
            }
        });

        document.getElementById('startQuizBtn').addEventListener('click', () => {
            const candidateNameInput = document.getElementById('candidateName');
            const candidateName = candidateNameInput.value.trim();
            const nameError = document.getElementById('nameError');

            if (candidateName) {
                nameError.classList.add('hidden');
                // Initialize userAnswers array for the new quiz attempt
                userAnswers = new Array(quizQuestions.length).fill(null);
                currentQuestionIndex = 0;
                startTimer();
                renderQuestion();
                showPage('quizPage');
            } else {
                nameError.classList.remove('hidden');
            }
        });

        document.getElementById('nextBtn').addEventListener('click', nextQuestion);
        document.getElementById('prevBtn').addEventListener('click', prevQuestion);
        document.getElementById('submitQuizBtn').addEventListener('click', () => submitQuiz(false));
        document.getElementById('restartQuizBtn').addEventListener('click', () => {
            // Reset quiz state
            currentQuestionIndex = 0;
            userAnswers = [];
            clearInterval(timerInterval); // Clear any lingering timer
            // Re-shuffle questions for a new attempt
            initializeQuiz();
            showPage('loginPage'); // Go back to login for a fresh start
        });

        // --- Quiz Initialization ---
        function initializeQuiz() {
            // Clear previous questions
            quizQuestions.length = 0;

            // Pedagogy (10 MCQs from Pages 21-24)
            const pedagogyMCQs = [
                { question: "Which of the following is a key aspect of classroom management?", options: ["Ignoring student behavior", "Establishing clear rules and routines", "Allowing constant disruptions", "Focusing only on academic content"], correctOptionIndex: 1, explanation: "Clear rules and routines are essential for effective classroom management (Page 21)." },
                { question: "What is the purpose of positive reinforcement in the classroom?", options: ["To punish misbehavior", "To discourage participation", "To encourage desired behaviors", "To create a competitive environment"], correctOptionIndex: 2, explanation: "Positive reinforcement strengthens desirable behaviors (Page 21)." },
                { question: "Which teaching strategy involves students working together in small groups to achieve a common goal?", options: ["Lecture method", "Individual work", "Cooperative learning", "Direct instruction"], correctOptionIndex: 2, explanation: "Cooperative learning emphasizes teamwork and shared goals (Page 22)." },
                { question: "What is the primary benefit of using differentiated instruction?", options: ["To teach all students the same way", "To cater to the diverse learning needs of students", "To make lessons easier for the teacher", "To reduce student engagement"], correctOptionIndex: 1, explanation: "Differentiated instruction tailors teaching to meet individual student needs (Page 22)." },
                { question: "Which of the following is an example of a higher-order thinking skill?", options: ["Recalling facts", "Defining terms", "Analyzing information", "Listing items"], correctOptionIndex: 2, explanation: "Analyzing, evaluating, and creating are higher-order thinking skills (Page 23)." },
                { question: "What is the role of critical thinking in education?", options: ["To accept information passively", "To question, analyze, and evaluate information", "To memorize facts without understanding", "To avoid problem-solving"], correctOptionIndex: 1, explanation: "Critical thinking involves active and skillful conceptualization, application, analysis, synthesis, and evaluation (Page 23)." },
                { question: "Which learning theory emphasizes that individuals learn by observing others?", options: ["Behaviorism", "Cognitivism", "Social learning theory", "Constructivism"], correctOptionIndex: 2, explanation: "Social learning theory (Bandura) highlights observational learning (Page 24)." },
                { question: "According to Piaget's theory of cognitive development, children in the concrete operational stage (7-11 years) are capable of:", options: ["Abstract thinking", "Logical thinking about concrete events", "Egocentric thought", "Object permanence"], correctOptionIndex: 1, explanation: "Children in the concrete operational stage develop logical reasoning for concrete situations (Page 24)." },
                { question: "Vygotsky's concept of the 'Zone of Proximal Development' (ZPD) refers to:", options: ["What a learner can do independently.", "What a learner cannot do at all.", "What a learner can do with assistance.", "A fixed stage of development."], correctOptionIndex: 2, explanation: "ZPD is the gap between what a learner can do alone and what they can do with guidance (Page 24)." },
                { question: "Which of the following describes a student-centered approach to teaching?", options: ["Teacher lectures, students listen.", "Students actively construct their own understanding.", "Emphasis on rote memorization.", "Strict adherence to textbooks."], correctOptionIndex: 1, explanation: "Student-centered approaches, like constructivism, involve active knowledge construction (Page 24)." }
            ];
            quizQuestions.push(...pedagogyMCQs);

            // General Science (25 MCQs from Pages 171-188)
            const generalScienceMCQs = [
                { question: "What is the chemical symbol for sodium?", options: ["So", "Na", "Nd", "Sm"], correctOptionIndex: 1, explanation: "Na is the chemical symbol for Sodium (Page 171)." },
                { question: "Which of the following is a noble gas?", options: ["Oxygen", "Chlorine", "Helium", "Nitrogen"], correctOptionIndex: 2, explanation: "Helium is a noble gas, known for its inertness (Page 172)." },
                { question: "What is the process by which plants convert carbon dioxide and water into glucose and oxygen using sunlight?", options: ["Respiration", "Fermentation", "Photosynthesis", "Decomposition"], correctOptionIndex: 2, explanation: "Photosynthesis is the process of food production in plants (Page 173)." },
                { question: "Which of the following is a product of photosynthesis?", options: ["Carbon dioxide", "Water", "Oxygen", "Nitrogen"], correctOptionIndex: 2, explanation: "Oxygen is released as a byproduct of photosynthesis (Page 174)." },
                { question: "What is the process by which living organisms break down glucose to release energy?", options: ["Photosynthesis", "Digestion", "Respiration", "Transpiration"], correctOptionIndex: 2, explanation: "Respiration is the process of energy release from food (Page 175)." },
                { question: "Which gas is taken in by humans during respiration?", options: ["Carbon dioxide", "Nitrogen", "Oxygen", "Hydrogen"], correctOptionIndex: 2, explanation: "Humans inhale oxygen for respiration (Page 176)." },
                { question: "What is the primary function of the human heart?", options: ["Digestion", "Filtering blood", "Pumping blood", "Breathing"], correctOptionIndex: 2, explanation: "The heart circulates blood throughout the body (Page 177)." },
                { question: "Which type of blood vessel carries oxygenated blood away from the heart to the body?", options: ["Veins", "Capillaries", "Arteries", "Venules"], correctOptionIndex: 2, explanation: "Arteries carry oxygen-rich blood from the heart (Page 178)." },
                { question: "What is the function of red blood cells?", options: ["Fighting infection", "Clotting blood", "Transporting oxygen", "Producing antibodies"], correctOptionIndex: 2, explanation: "Red blood cells carry oxygen using hemoglobin (Page 179)." },
                { question: "Which organ is responsible for filtering waste products from the blood and producing urine?", options: ["Liver", "Lungs", "Kidneys", "Pancreas"], correctOptionIndex: 2, explanation: "Kidneys filter blood and produce urine (Page 180)." },
                { question: "What is the main function of the nervous system?", options: ["Digestion of food", "Controlling and coordinating body activities", "Pumping blood", "Breathing"], correctOptionIndex: 1, explanation: "The nervous system controls communication and coordination (Page 181)." },
                { question: "Which part of the nervous system consists of the brain and spinal cord?", options: ["Peripheral nervous system", "Autonomic nervous system", "Central nervous system", "Somatic nervous system"], correctOptionIndex: 2, explanation: "The brain and spinal cord form the central nervous system (Page 182)." },
                { question: "What is the basic unit of the nervous system?", options: ["Nephron", "Alveolus", "Neuron", "Osteocyte"], correctOptionIndex: 2, explanation: "Neurons are the fundamental units of the nervous system (Page 183)." },
                { question: "Which sense organ is responsible for hearing?", options: ["Eye", "Nose", "Ear", "Tongue"], correctOptionIndex: 2, explanation: "The ear is the organ of hearing (Page 184)." },
                { question: "What is the transparent outer layer of the eye that helps to focus light?", options: ["Iris", "Pupil", "Cornea", "Retina"], correctOptionIndex: 2, explanation: "The cornea is the clear front part of the eye (Page 185)." },
                { question: "Which part of the eye contains photoreceptor cells (rods and cones) that detect light?", options: ["Lens", "Optic nerve", "Retina", "Vitreous humor"], correctOptionIndex: 2, explanation: "The retina converts light into neural signals (Page 186)." },
                { question: "What is the primary function of the human digestive system?", options: ["Breathing", "Pumping blood", "Breaking down food for nutrient absorption", "Controlling body movements"], correctOptionIndex: 2, explanation: "The digestive system processes food for energy and nutrients (Page 187)." },
                { question: "Which organ produces bile, which helps in the digestion of fats?", options: ["Stomach", "Pancreas", "Liver", "Small intestine"], correctOptionIndex: 2, explanation: "The liver produces bile (Page 188)." },
                { question: "What is the chemical symbol for iron?", options: ["I", "Ir", "Fe", "In"], correctOptionIndex: 2, explanation: "Fe is the chemical symbol for Iron (Page 171)." },
                { question: "Which group of elements are highly reactive non-metals, often found in salts?", options: ["Alkali metals", "Alkaline earth metals", "Halogens", "Noble gases"], correctOptionIndex: 2, explanation: "Halogens are a group of highly reactive non-metals (Page 172)." },
                { question: "What is the main pigment in plants that absorbs sunlight for photosynthesis?", options: ["Carotene", "Xanthophyll", "Chlorophyll", "Anthocyanin"], correctOptionIndex: 2, explanation: "Chlorophyll gives plants their green color and absorbs light (Page 173)." },
                { question: "Which part of the human circulatory system carries deoxygenated blood back to the heart?", options: ["Arteries", "Veins", "Capillaries", "Aorta"], correctOptionIndex: 1, explanation: "Veins return deoxygenated blood to the heart (Page 178)." },
                { question: "What is the largest organ in the human body?", options: ["Brain", "Heart", "Liver", "Skin"], correctOptionIndex: 3, explanation: "The skin is the largest organ (Page 181)." },
                { question: "Which taste bud detects sweetness?", options: ["Sour", "Bitter", "Sweet", "Salty"], correctOptionIndex: 2, explanation: "Sweet taste buds are primarily located at the tip of the tongue (Page 184)." },
                { question: "What is the final section of the large intestine that stores feces before elimination?", options: ["Small intestine", "Colon", "Rectum", "Appendix"], correctOptionIndex: 2, explanation: "The rectum stores waste before defecation (Page 187)." }
            ];
            quizQuestions.push(...generalScienceMCQs);

            // Social Studies (15 MCQs from Pages 525-542)
            const socialStudiesMCQs = [
                { question: "Which of the following is a major cultural festival celebrated in Pakistan?", options: ["Halloween", "Thanksgiving", "Eid-ul-Fitr", "Christmas"], correctOptionIndex: 2, explanation: "Eid-ul-Fitr is a significant Islamic festival celebrated in Pakistan (Page 525)." },
                { question: "What is the traditional dance form of Punjab, Pakistan, performed by men with vigorous movements?", options: ["Kathak", "Bharatanatyam", "Bhangra", "Odissi"], correctOptionIndex: 2, explanation: "Bhangra is a lively folk dance from Punjab (Page 526)." },
                { question: "Which of the following is a traditional craft of Pakistan involving intricate mirror work on fabric?", options: ["Pottery", "Embroidery", "Wood carving", "Metalwork"], correctOptionIndex: 1, explanation: "Mirror work embroidery is a traditional craft in Pakistan (Page 527)." },
                { question: "What is the primary role of a family in society?", options: ["To provide entertainment", "To educate children and instill values", "To manage the economy", "To enforce laws"], correctOptionIndex: 1, explanation: "Families are fundamental in socializing children and transmitting values (Page 528)." },
                { question: "Which of the following is a basic right of children?", options: ["Right to work long hours", "Right to education", "Right to be neglected", "Right to marry young"], correctOptionIndex: 1, explanation: "The right to education is a universal child's right (Page 529)." },
                { question: "What is the term for the unfair treatment of people based on their group, race, or religion?", options: ["Equality", "Justice", "Discrimination", "Tolerance"], correctOptionIndex: 2, explanation: "Discrimination involves prejudiced treatment (Page 530)." },
                { question: "Which of the following is a major cause of poverty in many developing countries?", options: ["High levels of education", "Economic inequality", "Strong infrastructure", "Abundant natural resources"], correctOptionIndex: 1, explanation: "Economic inequality often leads to widespread poverty (Page 531)." },
                { question: "What is the role of non-governmental organizations (NGOs) in society?", options: ["To govern the country", "To provide social services and advocate for causes", "To manage national defense", "To control the media"], correctOptionIndex: 1, explanation: "NGOs work for social welfare and advocacy (Page 532)." },
                { question: "Which of the following is a major global issue related to climate change?", options: ["Decreased global temperatures", "Rising sea levels", "Increased biodiversity", "More stable weather patterns"], correctOptionIndex: 1, explanation: "Rising sea levels are a direct consequence of global warming (Page 533)." },
                { question: "What is the term for the process of countries becoming more interconnected through trade, technology, and culture?", options: ["Isolationism", "Nationalism", "Globalization", "Regionalism"], correctOptionIndex: 2, explanation: "Globalization describes increasing worldwide interdependence (Page 534)." },
                { question: "Which of the following is a benefit of globalization?", options: ["Increased trade barriers", "Reduced cultural exchange", "Greater access to goods and services", "Limited technological advancement"], correctOptionIndex: 2, explanation: "Globalization facilitates wider access to products and services (Page 535)." },
                { question: "What is the primary purpose of human rights?", options: ["To limit individual freedoms", "To ensure basic dignity and freedom for all individuals", "To promote discrimination", "To justify conflict"], correctOptionIndex: 1, explanation: "Human rights protect fundamental freedoms and dignity (Page 536)." },
                { question: "Which international document outlines universal human rights?", options: ["Magna Carta", "Declaration of Independence", "Universal Declaration of Human Rights", "Treaty of Versailles"], correctOptionIndex: 2, explanation: "The Universal Declaration of Human Rights is a landmark document (Page 537)." },
                { question: "What is the term for a peaceful resolution of disputes between nations?", options: ["War", "Conflict", "Diplomacy", "Aggression"], correctOptionIndex: 2, explanation: "Diplomacy involves negotiation and peaceful settlement of issues (Page 538)." },
                { question: "Which of the following is a major cause of international conflict?", options: ["Cultural exchange", "Economic cooperation", "Resource scarcity", "Technological advancement"], correctOptionIndex: 2, explanation: "Competition for scarce resources can lead to conflict (Page 539)." }
            ];
            quizQuestions.push(...socialStudiesMCQs);

            // English (25 MCQs from Pages 831-838)
            const englishMCQs = [
                { question: "Which of the following is a word that modifies a verb, an adjective, or another adverb?", options: ["Noun", "Pronoun", "Adverb", "Preposition"], correctOptionIndex: 2, explanation: "An adverb provides more information about verbs, adjectives, or other adverbs (Page 831)." },
                { question: "Identify the adverb in the sentence: \"He sings *loudly*.\"", options: ["He", "Sings", "Loudly", "None of these"], correctOptionIndex: 2, explanation: "'Loudly' describes how he sings (Page 831)." },
                { question: "Which of these is an adverb of time?", options: ["Here", "Tomorrow", "Quickly", "Very"], correctOptionIndex: 1, explanation: "Adverbs of time indicate when an action happens (Page 832)." },
                { question: "What is an adverb of place?", options: ["A word that describes how an action happens.", "A word that describes when an action happens.", "A word that describes where an action happens.", "A word that describes the intensity of an action."], correctOptionIndex: 2, explanation: "Adverbs of place indicate location (Page 832)." },
                { question: "In the sentence, \"She walked *slowly*,\" what type of adverb is 'slowly'?", options: ["Adverb of time", "Adverb of place", "Adverb of manner", "Adverb of frequency"], correctOptionIndex: 2, explanation: "'Slowly' describes the manner of walking (Page 832)." },
                { question: "Which of the following is an adverb of frequency?", options: ["Outside", "Never", "Today", "Softly"], correctOptionIndex: 1, explanation: "Adverbs of frequency indicate how often an action occurs (Page 833)." },
                { question: "What is an adverb of degree?", options: ["A word that describes how an action happens.", "A word that describes when an action happens.", "A word that describes the extent or intensity of an action.", "A word that describes where an action happens."], correctOptionIndex: 2, explanation: "Adverbs of degree express intensity (Page 833)." },
                { question: "In the sentence, \"He is *very* tall,\" what type of adverb is 'very'?", options: ["Adverb of time", "Adverb of place", "Adverb of manner", "Adverb of degree"], correctOptionIndex: 3, explanation: "'Very' intensifies the adjective 'tall' (Page 833)." },
                { question: "Which of the following is a preposition?", options: ["Run", "Happy", "Under", "Quickly"], correctOptionIndex: 2, explanation: "Prepositions show relationships between nouns/pronouns and other words (Page 834)." },
                { question: "Identify the prepositional phrase in the sentence: \"The book is *on the table*.\"", options: ["The book", "Is", "On the table", "Table"], correctOptionIndex: 2, explanation: "A prepositional phrase begins with a preposition and ends with an object (Page 834)." },
                { question: "What is a conjunction?", options: ["A word that describes a noun.", "A word that shows action.", "A word that connects words, phrases, or clauses.", "A word that expresses emotion."], correctOptionIndex: 2, explanation: "Conjunctions link grammatical units (Page 835)." },
                { question: "Which of these is a coordinating conjunction?", options: ["Because", "Although", "But", "Since"], correctOptionIndex: 2, explanation: "'But' is one of the FANBOYS (For, And, Nor, But, Or, Yet, So) (Page 835)." },
                { question: "What is a subordinating conjunction?", options: ["A word that connects two independent clauses.", "A word that introduces a dependent clause.", "A word that shows strong emotion.", "A word that describes a verb."], correctOptionIndex: 1, explanation: "Subordinating conjunctions introduce dependent clauses (Page 836)." },
                { question: "In the sentence, \"*Although it was raining*, we went for a walk,\" what is 'Although'?", options: ["Coordinating conjunction", "Subordinating conjunction", "Preposition", "Adverb"], correctOptionIndex: 1, explanation: "'Although' introduces the dependent clause (Page 836)." },
                { question: "Which of the following is an interjection?", options: ["And", "Quickly", "Wow!", "Under"], correctOptionIndex: 2, explanation: "Interjections express sudden emotion (Page 837)." },
                { question: "What is the primary function of an interjection?", options: ["To connect sentences", "To modify verbs", "To express strong emotion or surprise", "To show possession"], correctOptionIndex: 2, explanation: "Interjections are exclamatory words (Page 837)." },
                { question: "Which of the following is a sentence fragment?", options: ["She ran fast.", "The tall building.", "He is happy.", "They arrived late."], correctOptionIndex: 1, explanation: "A sentence fragment is an incomplete sentence (Page 838)." },
                { question: "What is a run-on sentence?", options: ["A very long sentence.", "Two or more independent clauses incorrectly joined.", "A sentence with many commas.", "A sentence that is too short."], correctOptionIndex: 1, explanation: "Run-on sentences combine independent clauses without proper punctuation or conjunctions (Page 838)." },
                { question: "Which of these is a comma splice?", options: ["He ran. She walked.", "He ran, she walked.", "He ran and she walked.", "He ran; she walked."], correctOptionIndex: 1, explanation: "A comma splice uses only a comma to join two independent clauses (Page 838)." },
                { question: "What is the correct way to fix a run-on sentence?", options: ["Add more words.", "Break it into separate sentences, use a semicolon, or use a coordinating conjunction.", "Remove all punctuation.", "Change the verb tense."], correctOptionIndex: 1, explanation: "Various methods can correct run-on sentences (Page 838)." },
                { question: "What is the function of a semicolon?", options: ["To end a sentence.", "To separate items in a simple list.", "To join two closely related independent clauses.", "To introduce a direct quotation."], correctOptionIndex: 2, explanation: "Semicolons connect related independent clauses (Page 838)." },
                { question: "Which of the following is a complex sentence?", options: ["I like coffee and tea.", "She smiled, and he waved.", "Although it was cold, they went outside.", "Run fast!"], correctOptionIndex: 2, explanation: "A complex sentence contains an independent clause and at least one dependent clause (Page 836)." },
                { question: "What is the definition of a phrase?", options: ["A group of words with a subject and a verb.", "A group of words that expresses a complete thought.", "A group of words that functions as a single part of speech but lacks a subject-verb pair.", "A single word."], correctOptionIndex: 2, explanation: "A phrase is a group of related words that does not contain both a subject and a predicate (Page 834)." },
                { question: "Which of these is an example of an adverbial phrase?", options: ["The red car", "Singing loudly", "In the morning", "Very happy"], correctOptionIndex: 2, explanation: "An adverbial phrase modifies a verb, adjective, or another adverb, often indicating time, place, or manner (Page 834)." },
                { question: "What is a noun phrase?", options: ["A phrase that modifies a verb.", "A phrase that acts as a noun.", "A phrase that expresses emotion.", "A phrase that connects clauses."], correctOptionIndex: 1, explanation: "A noun phrase functions as a noun in a sentence (Page 834)." }
            ];
            quizQuestions.push(...englishMCQs);

            // Mathematics (25 MCQs from Pages 982-988)
            const mathematicsMCQs = [
                { question: "What is the value of $2/3 \\times 3/4$?", options: ["1/2", "1/4", "6/12", "5/7"], correctOptionIndex: 0, explanation: "Multiply numerators and denominators: $6/12 = 1/2$ (Page 982)." },
                { question: "Convert 120% into a decimal.", options: ["1.2", "12.0", "0.12", "1200"], correctOptionIndex: 0, explanation: "Divide by 100: $120 / 100 = 1.2$ (Page 983)." },
                { question: "If a car travels at a speed of 80 km/h, how far will it travel in 1.5 hours?", options: ["81.5 km", "120 km", "160 km", "200 km"], correctOptionIndex: 1, explanation: "Distance = Speed × Time = $80 \\times 1.5 = 120$ km (Page 984)." },
                { question: "What is the area of a trapezoid with parallel sides of 5 cm and 9 cm, and a height of 6 cm?", options: ["28 cm²", "42 cm²", "84 cm²", "14 cm²"], correctOptionIndex: 1, explanation: "Area = $1/2 \\times (sum of parallel sides) \\times height = 1/2 \\times (5+9) \\times 6 = 1/2 \\times 14 \\times 6 = 42$ cm² (Page 985)." },
                { question: "What is the volume of a cone with a radius of 3 cm and a height of 7 cm? (Use $\\pi \\approx 22/7$)", options: ["22 cm³", "66 cm³", "198 cm³", "396 cm³"], correctOptionIndex: 1, explanation: "Volume = $1/3 \\pi r^2 h = 1/3 \\times (22/7) \\times 3^2 \\times 7 = 1/3 \\times 22 \\times 9 = 66$ cm³ (Page 986)." },
                { question: "Which of the following is a measure of variability?", options: ["Mean", "Median", "Mode", "Standard Deviation"], correctOptionIndex: 3, explanation: "Standard deviation measures how spread out numbers are (Page 987)." },
                { question: "What is the probability of rolling a 7 on a standard six-sided die?", options: ["1/6", "1/2", "0", "1"], correctOptionIndex: 2, explanation: "A standard die only has numbers 1-6, so rolling a 7 is impossible (Page 988)." },
                { question: "What is the value of $x$ in the equation $4x + 3 = 19$?", options: ["3", "4", "5", "6"], correctOptionIndex: 3, explanation: "$4x = 16$, so $x = 4$ (Page 982)." },
                { question: "Simplify the expression: $(5x + 2y) - (2x - y)$", options: ["$3x + y$", "$3x + 3y$", "$7x + y$", "$7x + 3y$"], correctOptionIndex: 1, explanation: "$5x - 2x + 2y - (-y) = 3x + 2y + y = 3x + 3y$ (Page 983)." },
                { question: "What is the value of $1/2 \\div 1/4$?", options: ["1/8", "1/2", "2", "4"], correctOptionIndex: 2, explanation: "$1/2 \\times 4/1 = 4/2 = 2$ (Page 982)." },
                { question: "What is the surface area of a rectangular prism with length 6 cm, width 3 cm, and height 2 cm?", options: ["36 cm²", "54 cm²", "72 cm²", "108 cm²"], correctOptionIndex: 2, explanation: "Surface Area = $2(lw + lh + wh) = 2(6 \\times 3 + 6 \\times 2 + 3 \\times 2) = 2(18 + 12 + 6) = 2(36) = 72$ cm² (Page 986)." },
                { question: "How many sides does a nonagon have?", options: ["7", "8", "9", "10"], correctOptionIndex: 2, explanation: "A nonagon is a polygon with 9 sides (Page 985)." },
                { question: "What is the value of $10^3$?", options: ["30", "100", "1000", "10000"], correctOptionIndex: 2, explanation: "$10^3 = 10 \\times 10 \\times 10 = 1000$ (Page 982)." },
                { question: "What is the value of $x$ in the equation $x/3 - 1 = 4$?", options: ["9", "12", "15", "18"], correctOptionIndex: 2, explanation: "$x/3 = 5$, so $x = 15$ (Page 982)." },
                { question: "If the temperature is 5 degrees Celsius, what is it in Fahrenheit? (Formula: $F = C \\times 9/5 + 32$)", options: ["37°F", "41°F", "45°F", "50°F"], correctOptionIndex: 1, explanation: "$5 \\times 9/5 + 32 = 9 + 32 = 41°F$ (Page 987)." },
                { question: "What is the area of a sector of a circle with radius 6 cm and central angle 60 degrees? (Use $\\pi = 3.14$)", options: ["18.84 cm²", "37.68 cm²", "56.52 cm²", "113.04 cm²"], correctOptionIndex: 1, explanation: "Area of sector = $(\\theta/360) \\times \\pi r^2 = (60/360) \\times 3.14 \\times 6^2 = 1/6 \\times 3.14 \\times 36 = 6 \\times 3.14 = 18.84$ cm² (Page 985)." },
                { question: "What is the slope of the line passing through points (1, 2) and (3, 6)?", options: ["1", "2", "3", "4"], correctOptionIndex: 1, explanation: "Slope = $(y_2 - y_1) / (x_2 - x_1) = (6 - 2) / (3 - 1) = 4 / 2 = 2$ (Page 984)." },
                { question: "Which of the following is an irrational number?", options: ["$0.5$", "$1/3$", "$\\sqrt{4}$", "$\\sqrt{5}$"], correctOptionIndex: 3, explanation: "An irrational number cannot be expressed as a simple fraction. $\\sqrt{5}$ is irrational (Page 983)." },
                { question: "What is the probability of flipping a coin and getting heads?", options: ["0", "0.25", "0.5", "1"], correctOptionIndex: 2, explanation: "There are two equally likely outcomes (heads or tails), so probability is 1/2 or 0.5 (Page 988)." },
                { question: "What is the value of $2^5$?", options: ["10", "16", "24", "32"], correctOptionIndex: 3, explanation: "$2^5 = 2 \\times 2 \\times 2 \\times 2 \\times 2 = 32$ (Page 982)." },
                { question: "Simplify the expression: $x^2 \\times x^3$", options: ["$x^5$", "$x^6$", "$x^1$", "$2x^5$"], correctOptionIndex: 0, explanation: "When multiplying powers with the same base, add the exponents: $x^{2+3} = x^5$ (Page 983)." },
                { question: "What is the perimeter of a regular pentagon with a side length of 8 cm?", options: ["32 cm", "40 cm", "48 cm", "56 cm"], correctOptionIndex: 1, explanation: "A pentagon has 5 sides, so perimeter = $5 \\times 8 = 40$ cm (Page 985)." },
                { question: "What is the volume of a sphere with a radius of 3 cm? (Use $\\pi = 3.14$)", options: ["28.26 cm³", "56.52 cm³", "84.78 cm³", "113.04 cm³"], correctOptionIndex: 3, explanation: "Volume = $4/3 \\pi r^3 = 4/3 \\times 3.14 \\times 3^3 = 4/3 \\times 3.14 \\times 27 = 4 \\times 3.14 \\times 9 = 113.04$ cm³ (Page 986)." },
                { question: "What is the median of the following set of numbers: 10, 5, 20, 15, 25?", options: ["10", "15", "20", "25"], correctOptionIndex: 1, explanation: "Order the numbers: 5, 10, 15, 20, 25. The median is the middle number, 15 (Page 987)." },
                { question: "What is the range of the following set of numbers: 1, 10, 3, 7, 5?", options: ["5", "7", "9", "10"], correctOptionIndex: 2, explanation: "Range = Highest - Lowest = $10 - 1 = 9$ (Page 987)." }
            ];
            quizQuestions.push(...mathematicsMCQs);

            // Randomly select one special question
            specialQuestionIndex = Math.floor(Math.random() * quizQuestions.length);
            quizQuestions[specialQuestionIndex].special = true;

            // Apply 30% chance to shuffle the entire quiz order
            if (Math.random() < 0.3) {
                shuffleArray(quizQuestions);
                // After shuffling, find the new index of the special question
                specialQuestionIndex = quizQuestions.findIndex(q => q.special);
            }
        }

        // Initialize the quiz when the script loads
        initializeQuiz();
    </script>
</body>
</html>
